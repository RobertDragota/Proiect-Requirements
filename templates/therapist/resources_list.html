{% extends 'base.html' %}
{% block content %}
  <div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Resources</h1>
    <a class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" href="{{ url_for('therapist.resources_new') }}">
      <i class="fas fa-plus fa-sm text-white-50"></i> New Resource
    </a>
  </div>

  <div class="card shadow mb-4">
    <div class="card-header py-3">
      <h6 class="m-0 font-weight-bold text-primary"><i class="fas fa-folder-open mr-2"></i>Your Shared Resources</h6>
    </div>
    <div class="card-body">
      {% if items %}
        <div class="list-group">
          {% for r in items %}
            <div class="list-group-item d-flex justify-content-between align-items-start">
              <div class="flex-grow-1">
                <div class="font-weight-bold">{{ r.title }}</div>
                <a class="small text-info" href="{{ r.url }}" target="_blank" rel="noreferrer">
                  <i class="fas fa-external-link-alt mr-1"></i>{{ r.url[:60] }}{% if r.url|length > 60 %}...{% endif %}
                </a>
                {% if r.description %}<div class="text-muted mt-1">{{ r.description }}</div>{% endif %}
              </div>
              <div class="ml-3 text-nowrap">
                <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('therapist.resources_edit', resource_id=r.id) }}">
                  <i class="fas fa-edit"></i>
                </a>
                <form method="post" action="{{ url_for('therapist.resources_delete', resource_id=r.id) }}" class="d-inline">
                  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                  <button class="btn btn-sm btn-outline-danger" type="submit" onclick="return confirm('Delete resource?')">
                    <i class="fas fa-trash"></i>
                  </button>
                </form>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="text-center py-4">
          <i class="fas fa-folder-open fa-3x text-gray-300 mb-3"></i>
          <p class="text-muted mb-0">No resources yet. Add resources to share with your patients.</p>
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
